openapi: 3.0.1
info:
  title: Bulk Payments Status
  description: |
    # Bulk Payments Status API

    API which allows to sent payment status messages from NWUs to the RBI
  version: 0.6.1


  contact:
    name: Realtime Integration Center of Excellence

tags:
  - name: Bulk Payments Status
    description: Group Payment API for updateing bulk payment status.


paths:
  /api/v1/bulk-credit-transfers/{bulkPaymentId}/status:
    put:
      summary: Send status of credit transfers
      description: NWU notifies about the status of a credit transfer in ISO 20022 pain.002 format translated to JSON or directly in XML.
      security:
        - openId:
            - nwb
      operationId: bulkCreditTransferStatus
      tags:
        - Bulk Payments Status
      parameters:
        - $ref: "#/components/parameters/X-Request-ID"
        - $ref: "#/components/parameters/X-Correlation-ID"
        - $ref: "#/components/parameters/X-Replied-To"
        - $ref: "#/components/parameters/bulkPaymentId"
      requestBody:
        $ref: '#/components/requestBodies/BulkCreditTransferStatusRequest'
      responses:
        "204":
          description: "ReceivedOk"
        default:
          $ref: '#/components/responses/ErrorResponse'


  /api/v1/bulk-direct-debits/{bulkPaymentId}/status:
    put:
      summary: Send status of direct debits
      description: NWU notifies about the status of a direct debits in ISO 20022 pain.002 format translated to JSON or directly in XML.
      security:
        - openId:
            - nwb
      operationId: bulkDirectDebitStatus
      tags:
        - Bulk Payments Status
      parameters:
        - $ref: "#/components/parameters/X-Request-ID"
        - $ref: "#/components/parameters/X-Correlation-ID"
        - $ref: "#/components/parameters/X-Replied-To"
        - $ref: "#/components/parameters/bulkPaymentId"
      requestBody:
        $ref: '#/components/requestBodies/BulkDirectDebitsStatusRequest'
      responses:
        "204":
          description: "ReceivedOk"
        default:
          $ref: '#/components/responses/ErrorResponse'

components:
  securitySchemes:
    openId:
      type: openIdConnect
      openIdConnectUrl: /.well-known/openid-configuration

  parameters:
    bulkPaymentId:
      name: bulkPaymentId
      in: path
      description: unique ID of the payment
      required: true
      schema:
        type: string
    X-Request-ID:
      name: X-Request-ID
      in: header
      description: ID of the request, unique to the call, as determined by the initiating party.
      required: true
      example: '99391c7e-ad88-49ec-a2ad-99ddcb1f7721'
      schema:
        type: string
        format: uuid
    X-Correlation-ID:
      name: X-Correlation-ID
      in: header
      description: |
        X-Correlation-ID will be used to track requests through all involved services to be able to graph request flows, map how services contribute to response times, identify bottle necks, etc.
        The X-Correlation-ID must be propagated unchanged in any and all downstream services.
      required: true
      example: '99391c7e-ad88-49ec-a2ad-99ddcb1f7721'
      schema:
        type: string
        format: uuid

    X-Replied-To:
      name: X-Replied-To
      in: header
      description: Identifier of requesting party recieved in X-Reply-To header of bulk payment initiation.
      required: true
      schema:
        type: string

  requestBodies:
    BulkCreditTransferStatusRequest:
      required: true
      description: |
        Request to initiate bulk credit transfer
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BulkStatusReport'
        application/xml:
          schema:
            $ref: '#/components/schemas/pain.002'


    BulkDirectDebitsStatusRequest:
      required: true
      description: |
        Request to initiate bulk credit transfer.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BulkStatusReport'
        application/xml:
          schema:
            $ref: '#/components/schemas/pain.002'

  responses:
    ErrorResponse:
      description: Unexpected Error.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'

  schemas:

    BulkStatusReport:
      type: object
      properties:
        groupHeader:
          $ref: '#/components/schemas/SummaryGroupHeader'
        originalGroupInfo:
          $ref: '#/components/schemas/OriginalGroupInfo'
        originalPaymentInfos:
          type: array
          items:
            $ref: '#/components/schemas/OriginalPaymentInfo'
      required:
        - groupHeader



    InitiatingParty:
      type: object
      description: |
        Party initiating the transaction; it can be either the debtor himself or a party acting on behalf of the debtor.
        Either name or organizationId must be provided.
      properties:
        name:
          type: string
          example: 'Company XYZ'
          description: Initiation Party Name
          minLength: 1
          maxLength: 140
        identification:
          type: object
          properties:
            organisationIdentification:
              $ref: '#/components/schemas/OrganisationIdentification'
        contactDetails:
          $ref: '#/components/schemas/ContactDetails'

    OrganisationIdentification:
      type: object
      description: Identification of an organisation.
      properties:
        bic:
          $ref: '#/components/schemas/Bicfi'
        otherIdentification:
          $ref: '#/components/schemas/OtherOrganisationIdentification'

    Bicfi:
      description: |
        BICFI ISO 9362
      type: string
      minLength: 8
      maxLength: 11
      pattern: '^[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}$'
      example: 'AAAADEBBXXX'

    OtherOrganisationIdentification:
      description: |
        Other Identification of an organisation.
      type: object
      properties:
        id:
          type: string
          example: '47110815'
          minLength: 1
          maxLength: 35
      required:
        - id

    ContactDetails:
      type: object
      description: |
        Contains contact data like phone number or/and email.
      properties:
        phoneNumber:
          type: string
          minLength: 1
          maxLength: 35
        emailAddress:
          type: string
          minLength: 1
          maxLength: 140



    ClearingChannel:
      type: string
      enum:
        - RTGS
        - RTNS
        - MPNS
        - BOOK

    PaymentTypeInformation:
      type: object
      description: |
        Specifies the type of the underlying credit transfer. Either provided in bulk or on trx level, not both.
      properties:
        serviceLevel:
          $ref: '#/components/schemas/ServiceLevel'
        localInstrument:
          $ref: '#/components/schemas/LocalInstrument'
        sequenceType:
          #<PmtTpInf><SvcLvl>
          $ref: '#/components/schemas/SequenceType'
        categoryPurpose:
          $ref: '#/components/schemas/CategoryPurpose'
        instructionPriority:
          $ref: '#/components/schemas/InstructionPriority'
        clearingChannel:
          $ref: '#/components/schemas/ClearingChannel'
      required:
        - serviceLevel


    SequenceType:
      type: string
      description: |
        Specifies the purpose of the payment based on a set of pre-defined categories.
      x-enum-elements:
        - name: FRST
          description: First direct debit
        - name: RCUR
          description: Recurring direct debit
        - name: FNAL
          description: Final direct debit
        - name: OOFF
          description: One off direct debit
      enum:
        - FRST
        - RCUR
        - FNAL
        - OOFF



    MandateInformation:
      type: object
      properties:
        mandateId:
          $ref: '#/components/schemas/UniqueIdentification'
        dateOfSignature:
          type: string
          format: date
          example: '2019-08-02'
        amendmentIndicator:
          type: boolean
          description: "Indicates changes to the original mandate"
          example: false
        amendmentDetails:
          $ref: '#/components/schemas/MandateAmendmentDetails'
        electronicSignature:
          type: string
          maxLength: 1025
        firstCollectionDate:
          $ref: '#/components/schemas/DateSchema'
        finalCollectionDate:
          $ref: '#/components/schemas/DateSchema'
        frequency:
          $ref: '#/components/schemas/Frequency'
        reason:
          $ref: '#/components/schemas/MandateSetupReason'
        trackingDays:
          type: string
          pattern: '[0-9]{2}'
      required:
        - mandateId
        - dateOfSignature

    MandateTypeInformation:
      type: object
      properties:
        serviceLevel:
          $ref: '#/components/schemas/ServiceLevel'
        categoryPurpose:
          $ref: '#/components/schemas/CategoryPurpose'
        localInstrument:
          $ref: '#/components/schemas/LocalInstrument'
        mandateClassification:
          $ref: '#/components/schemas/MandateClassification'

    MandateClassification:
      type: object
      properties:
        code:
          $ref: '#/components/schemas/MandateClassificationCode'
        party:
          type: string
          maxLength: 35

    MandateClassificationCode:
      type: string
      enum:
        - FIXE
        - USGB
        - VARI

    CreditTransferMandateInformation:
      type: object
      properties:
        mandateId:
          $ref: '#/components/schemas/UniqueIdentification'
        type:
          $ref: '#/components/schemas/MandateTypeInformation'
        dateOfSignature:
          $ref: '#/components/schemas/DateSchema'
        dateOfVerification:
          $ref: '#/components/schemas/DateTimeSchema'
        electronicSignature:
          type: string
          maxLength: 1025
        firstPaymentDate:
          $ref: '#/components/schemas/DateSchema'
        finalPaymentDate:
          $ref: '#/components/schemas/DateSchema'
        frequency:
          $ref: '#/components/schemas/Frequency'
        reason:
          $ref: '#/components/schemas/MandateSetupReason'
      required:
        - mandateId
        - dateOfSignature


    MandateAmendmentDetails:
      type: object
      #<MndtRltdInf><AmdmntInfDtls>
      properties:
        originalCreditorSchemeIdentification:
          $ref: '#/components/schemas/PartyIdentification'
        originalCreditorAgent:
          $ref: '#/components/schemas/AccountAgent'
        originalCreditorAgentAccount:
          $ref: '#/components/schemas/CashAccount'
        originalMandateId:
          $ref: '#/components/schemas/UniqueIdentification'
        originalDebtor:
          $ref: '#/components/schemas/PartyIdentification'
        originalDebtorAccount:
          $ref: '#/components/schemas/CashAccount'
          #<MndtRltdInf><AmdmntInfDtls><OrgnlDbtrAcct>
        originalDebtorAgent:
          $ref: '#/components/schemas/AccountAgent'
          #<MndtRltdInf><AmdmntInfDtls><OrgnlDbtrAcct>
        originalFinalCollectionDate:
          $ref: '#/components/schemas/DateSchema'
        originalFrequency:
          $ref: '#/components/schemas/Frequency'
        originalReason:
          $ref: '#/components/schemas/MandateSetupReason'
        originalTrackingDays:
          type: string
          pattern: '[0-9]{2}'

    MandateSetupReason:
      type: object
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 4
        party:
          type: string
          maxLength: 70


    Frequency:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/FrequencyCode'
        period:
          $ref: '#/components/schemas/FrequencyPeriod'
        pointInTime:
          $ref: '#/components/schemas/FrequencyAndMoment'

    FrequencyAndMoment:
      type: object
      properties:
        countPerPeriod:
          type: string
          pattern: '[0-9]{2}'
        type:
          $ref: '#/components/schemas/FrequencyCode'


    FrequencyPeriod:
      type: object
      properties:
        countPerPeriod:
          type: number
        type:
          $ref: '#/components/schemas/FrequencyCode'
    FrequencyCode:
      type: string
      enum:
        - YEAR
        - MNTH
        - QURT
        - MIAN
        - WEEK
        - DAIL
        - ADHO
        - INDA
        - FRTN

    PartyChoice:
      type: object
      properties:
        party:
          $ref: '#/components/schemas/PartyIdentification'
        agent:
          $ref: '#/components/schemas/AccountAgent'

    PartyIdentification:
      type: object
      description: Can be provided on bulk or transaction level. A specification on both levels is not allowed.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 140
        identification:
          $ref: '#/components/schemas/Party'
        postalAddres:
          $ref: '#/components/schemas/Address'
        contactDetails:
          $ref: '#/components/schemas/ContactDetails'
        countryOfResidence:
          $ref: '#/components/schemas/Country'

    Party:
      type: object
      properties:
        privateIdentification:
          $ref: '#/components/schemas/OtherIdentification'
        organisationIdentification:
          $ref: '#/components/schemas/OrganisationIdentification'


    PaymentMethod:
      description: |
        Defines the means of payment that will be used to move the amount of money.
      type: string
      example: 'TRF'
      enum:
        - DD
        - TRF #Credit Transfer Initiation (SEPA)
        - TRA #Credit Transfer Initiation with confirmation, SWIFT-Confirmation (None-Sepa)
        - CHK #cheque payments (None-Sepa)


    ServiceLevel:
      description: |
        Specifies the terms and rules for the processing of the transaction.
      type: object
      properties:
        code:
          $ref: '#/components/schemas/ServiceLevelCode'
        proprietary:
          minLength: 1
          maxLength: 35
          type: string

    ServiceLevelCode:
      type: string
      description: |
        Payment priority
      example: 'SEPA'
      x-enum-elements:
        - name: SEPA
          description: Sepa non urgent payment.
        - name: SDVA
          description: Sepa Same day value payment.
        - name: NURG
          description: None urgent payment.
        - name: URGP
          description: Urgent payment.
      x-extensible-enum:
        - SEPA
        - SDVA
        - NURG
        - URGP

    CategoryPurpose:
      description: |
        Specifies the purpose of the payment based on a set of pre-defined categories.
      type: object
      properties:
        code:
          minLength: 1
          maxLength: 4
          type: string
        proprietary:
          minLength: 1
          maxLength: 35
          type: string

    LocalInstrument:
      description: Specifies the used service.
      type: object
      properties:
        code:
          minLength: 1
          maxLength: 4
          type: string
        proprietary:
          minLength: 1
          maxLength: 35
          type: string

    InstructionPriority:
      description: Serves the closer specification of the transfer priority.
      type: string
      minLength: 1
      maxLength: 4
      x-enum-elements:
        - name: NORM
          description: Normal priority
        - name: HIGH
          description: High priority
      enum:
        - NORM
        - HIGH

    Address:
      type: object
      properties:
        country:
          $ref: '#/components/schemas/Country'
        street:
          type: string
          description: Street name
          example: 'Am Stadtpark'
          minLength: 1
          maxLength: 70
        buildingNumber:
          type: string
          description: Building number
          example: '9'
          minLength: 1
          maxLength: 16
        city:
          type: string
          description: City
          example: 'Vienna'
          minLength: 1
          maxLength: 35
        postalCode:
          description: Postal Code
          example: '1030'
          type: string
          minLength: 1
          maxLength: 16
        addressLines:
          description: Alternative to the structured format giving the address multiple lines.
          type: array
          items:
            maxItems: 2
            type: string
            minLength: 1
            maxLength: 70
          example: ['Am Stadtpark 9', '1030, Vienna, Austria']

    Country:
      type: string
      description: Country in ISO 2 letter code.
      example: 'AT'
      minLength: 2
      maxLength: 2
      pattern: '^[A-Z]{2,2}$'

    Account: #MIgrate to CashAccount
      type: object
      description: |
        Account identification
      properties:
        identification:
          $ref: '#/components/schemas/AccountIdentification'
        currency:
          $ref: '#/components/schemas/Currency'
      required:
        - identification

    CashAccount:
      type: object
      description: |
        Account identification.
      properties:
        name:
          type: string
          maxLength: 70
        type:
          type: string
          minLength: 1
          maxLength: 4
        identification:
          $ref: '#/components/schemas/AccountIdentification'
        currency:
          $ref: '#/components/schemas/Currency'
      required:
        - identification

    AccountIdentification:
      description: |
        Required iban or otherId.
      type: object
      properties:
        iban:
          type: string
          description: Account IBAN.
          example: 'AT913225000000420018'
          minLength: 1
          maxLength: 34
          pattern: '^[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}$'
        otherIdentification:
          $ref: '#/components/schemas/OtherIdentification'

    OtherIdentification:
      description: |
        Other identification of an account or agent.
      type: object
      properties:
        id:
          $ref: '#/components/schemas/UniqueIdentification'
        issuer:
          type: string
          minLength: 1
          maxLength: 35
        scheme:
          $ref: '#/components/schemas/OtherScheme'

    OtherScheme:
      type: object
      properties:
        code:
          minLength: 1
          maxLength: 4
          type: string
        proprietary:
          minLength: 1
          maxLength: 35
          type: string

    AccountAgent:
      type: object
      description: |
        The Financial institution which is servicing an account. Either BIC name of otherID are required.
      properties:
        financialInstitutionIdentification:
          $ref: '#/components/schemas/FinancialInstitutionIdentification'
      required:
        - financialInstitutionIdentification

    FinancialInstitutionIdentification:
      type: object
      properties:
        bic:
          $ref: '#/components/schemas/Bicfi'
        name:
          type: string
          description: Name of the account servicing institution. Only used for creditor agent.
          example: 'EXAMPLE BANK'
          minLength: 1
          maxLength: 140
        otherIdentification:
          $ref: '#/components/schemas/OtherIdentification'


    ChargeBearer:
      description: Specifies which party/parties will bear the charges associated with the processing of the payment transaction.
      example: 'SLEV'
      x-enum-elements:
        - name: CRED
          description: 'CREDITOR'
        - name: DEBT
          description: 'DEBTOR'
        - name: SHAR
          description: 'SHARED'
        - name: SLEV
          description: 'SLEV'
      type: string
      enum:
        - CRED
        - DEBT
        - SHAR
        - SLEV



    Amount:
      type: object
      properties:
        currency:
          $ref: '#/components/schemas/Currency'
        amount:
          description: The amount value.
          example: '123.5'
          type: string
          minLength: 1
          maxLength: 15
      required:
        - currency
        - amount



    RemittanceInformation:
      type: object
      description: |
        Remittance information for the transaction.
      properties:
        structured:
          type: object
          properties:
            #TODO fulfill
            creditorReferenceInformation:
              $ref: '#/components/schemas/CreditorReferenceInformation'
          required:
            - creditorReferenceInformation
        unstructured:
          description: Unstructed remittance information.
          type: string
          example: 'Ref Number Merchant'
          minLength: 1
          maxLength: 140

    CreditorReferenceInformation:
      type: object
      properties:
        reference:
          description: The actual reference.
          type: string
          minLength: 1
          maxLength: 35
          example: '9877-9880-98'
        code:
          description: "referenceType"
          type: string
          minLength: 1
          maxLength: 4
          example: 'HR00'
        issuer:
          description: "referenceIssuer"
          type: string
          minLength: 1
          maxLength: 35
          example: 'Issuer'




    PaymentStatus:
      title: transactionStatus
      example: 'ACCP'
      x-enum-elements:
        - name: ACCC
          description: 'AcceptedSettlementCompleted - Money Credited'
        - name: ACCP
          description: 'AcceptedCustomerProfile'
        - name: ACSC
          description: 'AcceptedSettlementCompleted'
        - name: ACSP
          description: 'AcceptedSettlementInProgress'
        - name: ACTC
          description: 'AcceptedTechnicalValidation'
        - name: ACWC
          description: 'AcceptedWithChange'
        - name: ACWP
          description: 'AcceptedWithoutPosting'
        - name: RCVD
          description: 'Received'
        - name: PDNG
          description: 'Pending'
        - name: PATC
          description: 'PartiallyAcceptedTechnical'
        - name: RJCT
          description: 'Rejected'
        - name: CANC
          description: 'Cancelled'
      type: string
      enum:
        - ACCC
        - ACCP
        - ACSC
        - ACSP
        - ACTC
        - ACWC
        - ACWP
        - RCVD
        - PDNG
        - PATC
        - RJCT
        - CANC



    SummaryGroupHeader:
      description: |
        Total set of information shared by all transactions included in the message
      properties:
        messageId:
          $ref: '#/components/schemas/UniqueIdentification'
        creationDateTime:
          description: Date and time at which the message was created.
          type: string
          example: '2019-09-21T17:32:28Z'
          format: date-time
          #<GrpHdr><CreDtTm>
        initiatingParty:
          $ref: '#/components/schemas/InitiatingParty'
          #<GrpHdr><InitgPty>
        debtorAgent:
          $ref: '#/components/schemas/AccountAgent'
          #<DbtrAgt>
        creditorAgent:
          $ref: '#/components/schemas/AccountAgent'
      required:
        - messageId
        - creationDateTime
        - initiatingParty
        - debtorAgent
        - creditorAgent

    OriginalGroupInfo:
      description: |
        Total set of information shared by all transactions included in the message.
      properties:
        messageId:
          $ref: '#/components/schemas/UniqueIdentification'
        messageNameId:
          $ref: '#/components/schemas/UniqueIdentification'
        creationDateTime:
          description: Date and time at which the message was created.
          type: string
          example: '2019-09-21T17:32:28Z'
          format: date-time
          #<GrpHdr><CreDtTm>
        controlSum:
          example: '42.13'
          description: Total amount of all individual transaction amounts in the batch.
          type: string
          minLength: 1
          maxLength: 15
          #format: decimal
          #passed as string to avoid converstion errors (recommended in whitepaper)
          #arbitrary length chosen similar to other string fields
          #<GrpHdr><CtrlSum>
        numberOfTransactions:
          type: integer
          format: int64
          example: 1
          description: Total number of individual transactions contained in the batch.
          minLength: 1
          maxLength: 15
        status:
          $ref: '#/components/schemas/PaymentStatus'
        statusReasonInformations:
          type: array
          items:
            $ref: '#/components/schemas/StatusReasonInformation'
        transactionsPerStatus:
          type: array
          items:
            $ref: '#/components/schemas/TransactionsPerStatus'
      required:
        - messageId
        - creationDateTime
        - controlSum
        - numberOfTransactions
        - status

    OriginalPaymentInfo:
      description: |
        Total set of information shared by all transactions included in the message
      properties:
        paymentInformationId:
          $ref: '#/components/schemas/UniqueIdentification'
        controlSum:
          example: '42.13'
          description: Total amount of all individual transaction amounts in the batch.
          type: string
          minLength: 1
          maxLength: 15
          #format: decimal
          #passed as string to avoid converstion errors (recommended in whitepaper)
          #arbitrary length chosen similar to other string fields
          #<GrpHdr><CtrlSum>
        numberOfTransactions:
          type: integer
          format: int64
          example: 1
          description: Total number of individual transactions contained in the batch.
          minLength: 1
          maxLength: 15
        status:
          $ref: '#/components/schemas/PaymentStatus'
        statusReasonInformations:
          type: array
          items:
            $ref: '#/components/schemas/StatusReasonInformation'
        transactionsPerStatus:
          type: array
          items:
            $ref: '#/components/schemas/TransactionsPerStatus'
        transactionsInfos:
          type: array
          items:
            $ref: '#/components/schemas/TransactionInfos'
      required:
        - paymentInformationId
        - controlSum
        - numberOfTransactions
        - status


    TransactionInfos:
      type: object
      properties:
        statusId:
          $ref: '#/components/schemas/UniqueIdentification'
        instructionId:
          $ref: '#/components/schemas/UniqueIdentification'
        endToEndId:
          $ref: '#/components/schemas/EndToEndIdentification'
        uuid:
          $ref: '#/components/schemas/UUID'
        status:
          $ref: '#/components/schemas/PaymentStatus'
        statusReasonInformations:
          type: array
          items:
            $ref: '#/components/schemas/StatusReasonInformation'
        chargesInfo:
          type: array
          items:
            $ref: '#/components/schemas/ChargesInfo'
        trackerData:
          type: array
          items:
            $ref: '#/components/schemas/TrackerData'
        acceptanceDateTime:
          $ref: '#/components/schemas/DateTimeSchema'
        accountServicerReference:
          $ref: '#/components/schemas/AccountServicerReference'
        clearingSystemReference:
          $ref: '#/components/schemas/ClearingSystemReference'
        orginalTransactionReference:
          $ref: '#/components/schemas/OrginalTransactionReference'


    OrginalTransactionReference:
      type: object
      properties:
        intermedientBankSettlementAmount:
          $ref: '#/components/schemas/Amount'
        amount:
          $ref: '#/components/schemas/Amount'
        intermediateBankSettlementDate:
          $ref: '#/components/schemas/DateSchema'
        requestedOrderCollectionDate:
          $ref: '#/components/schemas/DateSchema'
        requestedExecutionDate:
          $ref: '#/components/schemas/DateSchema'
        creditorSchemeId:
          $ref: '#/components/schemas/PartyIdentification'
        settlementIstruction:
          $ref: '#/components/schemas/SettlementIstruction'
        paymentTypeInformation:
          $ref: '#/components/schemas/PaymentTypeInformation'
        paymentMethod:
          $ref: '#/components/schemas/PaymentMethod'
        mandateRelatedInfo:
          type: object
          properties:
            directDebitMandate:
              $ref: '#/components/schemas/MandateInformation'
            creditTransferMandate:
              $ref: '#/components/schemas/CreditTransferMandateInformation'
        remmitanceInformation:
          $ref: '#/components/schemas/RemittanceInformation'
        ultimateDebtor:
          $ref: '#/components/schemas/PartyChoice'
        debtor:
          $ref: '#/components/schemas/PartyChoice'
        debtorAccount:
          $ref: '#/components/schemas/CashAccount'
        debtorAgent:
          $ref: '#/components/schemas/AccountAgent'
        debtorAgentAccount:
          $ref: '#/components/schemas/CashAccount'
        creditorAgent:
          $ref: '#/components/schemas/AccountAgent'
        creditorAgentAccount:
          $ref: '#/components/schemas/CashAccount'
        creditor:
          $ref: '#/components/schemas/PartyChoice'
        creditorAccount:
          $ref: '#/components/schemas/CashAccount'
        ultimateCreditor:
          $ref: '#/components/schemas/PartyChoice'

    SettlementIstruction:
      type: object
      properties:
        settlementMethod:
          $ref: '#/components/schemas/SettlementMethodCode'
        settlementAccount:
          $ref: '#/components/schemas/CashAccount'
        clearingSystemReference:
          $ref: '#/components/schemas/ClearingSystemReference'
        instructingReimbursementAgent:
          $ref: '#/components/schemas/AccountAgent'
        instructingReimbursementAgentAccount:
          $ref: '#/components/schemas/Account'
        instructedReimbursementAgent:
          $ref: '#/components/schemas/AccountAgent'
        instructedReimbursementAgentAccount:
          $ref: '#/components/schemas/Account'
        thirdReimbursementAgent:
          $ref: '#/components/schemas/AccountAgent'
        thirdReimbursementAgentAccount:
          $ref: '#/components/schemas/Account'


    TrackerData:
      type: object
      description: |
        TODO
      properties:
        confirmedDate:
          $ref: '#/components/schemas/DateTimeSchema'
        confirmedAmount:
          $ref: '#/components/schemas/Amount'
        trackerRecords:
          type: array
          items:
            $ref: '#/components/schemas/TrackerRecord'

    TrackerRecord:
      type: object
      properties:
        agent:
          $ref: '#/components/schemas/AccountAgent'
        chargeBearer:
          $ref: '#/components/schemas/ChargeBearer'
        chargesAmount:
          $ref: '#/components/schemas/Amount'
        exchangeRateData:
          $ref: '#/components/schemas/ExchangeRateData'

    ExchangeRateData:
      type: object
      properties:
        sourceCurrency:
          $ref: '#/components/schemas/Currency'
        targetCurrency:
          $ref: '#/components/schemas/Currency'
        unitCurrency:
          $ref: '#/components/schemas/Currency'
        exchangeRate:
          description: |
            The amount of exchange rate
          type: number


    DateTimeSchema:
      description: Date and time at which the message was created.
      type: string
      example: '2019-09-21T17:32:28Z'
      format: date-time
      #<GrpHdr><CreDtTm>

    DateSchema:
      description: Date and time at which the message was created.
      type: string
      example: '2019-09-21'
      format: date
      #<GrpHdr><CreDtTm>

    SettlementMethodCode:
      type: string
      enum:
        - INDA
        - INGA
        - COVE
        - CLRG

    AccountServicerReference:
      type: string
      example: 'MCCT1306251365420971215'
      minLength: 1
      maxLength: 35


    ClearingSystemReference:
      type: string
      example: 'MCCT1306251365420971215'
      minLength: 1
      maxLength: 35


    UniqueIdentification:
      type: string
      description: Identification for each single transaction status change.
      example: 'MCCT1306251365420971215'
      minLength: 1
      maxLength: 35

    ChargesInfo:
      type: object
      properties:
        amount:
          $ref: '#/components/schemas/Amount'
        agent:
          $ref: '#/components/schemas/AccountAgent'

    StatusReasonInformation:
      type: object
      properties:
        organization:
          $ref: '#/components/schemas/PartyIdentification'
        reason:
          type: string
          maxLength: 35
        additionalInformation:
          type: string
          maxLength: 105

    TransactionsPerStatus:
      type: object
      properties:
        controlSum:
          example: '42.13'
          description: Total amount of all individual transaction amounts in the batch.
          type: string
          minLength: 1
          maxLength: 15
          #format: decimal
          #passed as string to avoid converstion errors (recommended in whitepaper)
          #arbitrary length chosen similar to other string fields
          #<GrpHdr><CtrlSum>
        numberOfTransactions:
          type: integer
          format: int64
          example: 1
          description: Total number of individual transactions contained in the batch.
          minLength: 1
          maxLength: 15
        status:
          $ref: '#/components/schemas/PaymentStatus'

    Currency:
      example: EUR
      description: The amount currency.
      type: string
      pattern: '^[A-Z]{3,3}$'

    EndToEndIdentification:
      description: |
        Unique identification, as assigned by the initiating party, to unambiguously identify the transaction.
        This identification is passed on, unchanged, throughout the entire end-to-end chain.
      #<PmtId><EndToEndId>
      example: 'E2EC130625000009'
      type: string
      minLength: 1
      maxLength: 35

    UUID:
      type: string
      pattern: '[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}'

    pain.002:
      description: |
        A pain.002 structure corresponding to the Payment Status Report.

        urn:iso:std:iso:20022:tech:xsd:pain.002.001.11
      type: string
      example:
        <Document>
        <CstmrPmtStsRpt>
        <GrpHdr>
        <MsgId>13110616213300101</MsgId>
        <CreDtTm>2013-11-06T16:21:33</CreDtTm>
        <InitgPty>
        <Id>
        <OrgId>
        <BICOrBEI>HANDSESS</BICOrBEI>
        </OrgId>
        </Id>
        </InitgPty>
        </GrpHdr>
        <OrgnlGrpInfAndSts>
        <OrgnlMsgId>Message 9 200131106</OrgnlMsgId>
        <OrgnlMsgNmId>pain.008.001.02</OrgnlMsgNmId>
        <OrgnlCreDtTm>2013-10-08T12:57:52</OrgnlCreDtTm>
        <GrpSts>ACCP</GrpSts>
        </OrgnlGrpInfAndSts>
        </CstmrPmtStsRpt>
        </Document>

    Error:
      type: object
      properties:
        id:
          type: string
          description: Unique UUID for audit purposes.
        code:
          type: string
          description: Optional error code for reporting purposes.
        description:
          type: string
          description: The description of the error.
